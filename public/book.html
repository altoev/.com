<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Your Ride | Altoev</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/nav.css">
    <link rel="stylesheet" href="styles/book.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="icon" href="images/favicon.ico">
    <script src="https://js.stripe.com/v3/"></script>
    <script src="/scripts/booking-engine.js" defer></script>
</head>

<body>
    <!-- Navigation Bar -->
    <header>
        <nav class="nav-bar">
            <div class="logo">
                <button onclick="window.location.href='/'" style="background: none; border: none; cursor: pointer;">
                    <img src="images/logo.png" alt="Altoev Logo">
                </button>
            </div>
            <ul class="nav-links">
                <li><a href="book.html">Book Now</a></li>
                <li><a href="about.html">About Us</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="login.html">Login</a></li>
                <li><a href="register.html">Register</a></li>
            </ul>
            <div class="menu-toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </nav>
    </header>

    <!-- Booking Steps -->
    <div class="content-wrapper">
        <div class="main-content">
            <h1>Book Your Ride</h1>
            <!-- Note for Eastern Time Zone -->
            <p class="note">* All times are in Eastern Time Zone (EST).</p>

            <!-- Step 1: Select Dates & Times -->
            <div id="step-1" class="step-container active">
                <h2>Step 1: Select Dates & Times</h2>
                <label>Start Date & Time:</label>
                <input type="text" id="start-date" class="flatpickr" required>
                <label>End Date & Time:</label>
                <input type="text" id="end-date" class="flatpickr" required>
                <button type="button" class="button" id="next-button-1">Next</button>
            </div>

            <!-- Step 2: Choose Vehicle -->
            <div id="step-2" class="step-container">
                <h2>Step 2: Choose Vehicle</h2>
                <div class="vehicle-selection" id="vehicle-selection"></div>
                <button type="button" class="button" id="next-button-2">Next</button>
            </div>

            <!-- Step 3: Choose Protection Plans & Add-ons -->
            <div id="step-3" class="step-container">
                <h2>Step 3: Choose Protection Plans & Add-ons</h2>
                <div class="addon-section" id="addon-section">
                    <!-- Add-ons loaded dynamically from the database -->
                </div>
                <button type="button" class="button" id="next-button-3">Next</button>
            </div>

            <!-- Step 4: Plaid Identity Verification -->
            <div id="step-4" class="step-container">
                <h2>Step 4: Plaid Identity Verification</h2>
                <p id="identity-status">Identity Verification in Progress</p>
                <div id="resume-verification-button-container"></div>
                <button type="button" class="button" id="next-button-4" style="display: none;">Next</button>
            </div>

            <!-- Step 5: Insurance Verification -->
            <div id="step-5" class="step-container">
                <h2>Step 5: Insurance Verification</h2>
                <iframe id="axle-verification-frame" class="embedded-verification" style="width: 100%; height: 500px; display: none;"></iframe>
                <button type="button" class="button" id="next-button-5">Next</button>
            </div>

            <!-- Step 6: Enter Your Details & Confirm Reservation -->
            <div id="step-6" class="step-container">
                <h2>Step 6: Enter Your Details & Confirm Reservation</h2>
                <div class="details-section">
                    <input type="text" id="full-name" placeholder="Full Name" required>
                    <input type="email" id="email" placeholder="Email Address" required>
                    <input type="tel" id="phone" placeholder="Phone Number" required>
                    <input type="text" id="address" placeholder="Address" required>

                    <h3>Payment Information</h3>
                    <div id="card-element"></div>
                    <div id="card-errors" role="alert" style="color: red;"></div>
                    <button type="button" id="confirm-reservation" class="button">Confirm Reservation</button>
                </div>
            </div>

            <!-- Step 7: Reservation Confirmed -->
            <div id="step-7" class="step-container">
                <h2>Reservation Confirmed</h2>
                <p>Your reservation has been successfully confirmed. Thank you for choosing Altoev!</p>
            </div>

            <div class="nav-buttons">
                <button type="button" id="prev-button" class="button" style="display: none;">Previous</button>
            </div>
        </div>

        <div class="summary-content">
            <img id="summary-vehicle-image" src="">
            <h3>Reservation Summary</h3>
            <div class="summary-details">
                <p>Start Date & Time: <span id="summary-start-date"></span></p>
                <p>End Date & Time: <span id="summary-end-date"></span></p>
                <p>Selected Vehicle: <span id="summary-vehicle"></span></p>
                <p>Selected Protection Plan: <span id="summary-protection-plan"></span></p>
                <p>Add-ons: <span id="summary-add-ons"></span></p>
                <p>Total Due: <span id="total-due"></span></p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <a href="/">
                    <img src="images/logo.png" alt="Altoev Logo">
                </a>
            </div>
            <div class="footer-links">
                <ul>
                    <li><a href="terms.html">Terms of Service</a></li>
                    <li><a href="privacy.html">Privacy Policy</a></li>
                    <li><a href="contact.html">Contact Us</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Altoev, Inc. All Rights Reserved.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>
</body>

</html>
